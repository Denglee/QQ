(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StaffReword"],{"2bfa":function(t,e,a){},"2ded":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layoutR-main"},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:t.tabStaffSalary,expression:"tabStaffSalary"}],staticClass:"vip-tabBox pubWidth",attrs:{id:"staffPay-tabBox"},on:{"tab-click":t.tabTotal},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"员工工资",name:"StaffSalary"}},[a("div",{},[a("div",{staticClass:"pt-screen"},[a("el-select",{staticClass:"inp-mar14 ptSel-section",attrs:{placeholder:"是否在职"},model:{value:t.lockStateVal,callback:function(e){t.lockStateVal=e},expression:"lockStateVal"}},t._l(t.lockState,(function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.lock}})})),1),a("el-select",{staticClass:"inp-mar14 ptSel-section",attrs:{placeholder:"请选择职位"},model:{value:t.userTypeListVal,callback:function(e){t.userTypeListVal=e},expression:"userTypeListVal"}},t._l(t.userTypeList,(function(t){return a("el-option",{key:t.index,attrs:{label:t.catname,value:t.id}})})),1),a("el-input",{staticClass:"inp-mar14 pt-screen-input",attrs:{placeholder:"请输入姓名或电话号码",clearable:""},model:{value:t.staffInpVal,callback:function(e){t.staffInpVal=e},expression:"staffInpVal"}}),a("el-button",{staticClass:"btn-search",attrs:{icon:"el-icon-search"},on:{click:t.btnSeaStaff}},[t._v("搜索")])],1),a("el-table",{staticClass:"pub-table",attrs:{data:t.tableStaff,border:""},on:{"selection-change":t.checkedStaff}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.sex?a("div",{staticClass:"status-connect"},[t._v("未知")]):t._e(),1==e.row.sex?a("div",{staticClass:"status-break"},[t._v("男")]):t._e(),2==e.row.sex?a("div",{staticClass:"status-break"},[t._v("女")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"user_type",label:"职位"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("全部职位")]):t._e(),1==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("店长")]):t._e(),2==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("顾问")]):t._e(),3==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("教练")]):t._e(),4==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("操课")]):t._e(),5==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("财务")]):t._e(),6==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("前台")]):t._e(),7==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("保洁员")]):t._e(),8==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("后勤")]):t._e(),100==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("教练经理")]):t._e(),200==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("顾问经理")]):t._e(),9==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("boss")]):t._e(),10==e.row.user_type?a("div",{staticClass:"status-connect"},[t._v("行政")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"120px"}}),a("el-table-column",{attrs:{prop:"user_no",label:"工号"}}),a("el-table-column",{attrs:{prop:"Royalty",label:"提成方式"}}),a("el-table-column",{attrs:{prop:"register_time",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"status-connect"},[t._v(t._s(t._f("dateFormat")(e.row.register_time)))])]}}])}),a("el-table-column",{attrs:{prop:"lock",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.lock?a("div",{staticClass:"status-connect"},[t._v("在职")]):t._e(),1==e.row.lock?a("div",{staticClass:"status-break"},[t._v("离职")]):t._e()]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total,jumper",total:t.pageTotalRows,"page-size":t.pageListRows},on:{"current-change":t.PageCurrent}})],1)]),a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"提成设置",name:"StaffRoyalty"}},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr btn-search",attrs:{type:"primary"},on:{click:t.btnAddRoyalty}},[t._v("添加提成")])],1),a("el-table",{staticClass:"pub-table",attrs:{data:t.tableRoyalty,border:""}},[a("el-table-column",{attrs:{type:"index",width:"100px"}}),a("el-table-column",{attrs:{prop:"deduction_name",label:"名称"}}),a("el-table-column",{attrs:{prop:"deduction_type",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.deduction_type?a("div",{staticClass:"status-connect"},[t._v("个人销售比")]):t._e(),2==e.row.deduction_type?a("div",{staticClass:"status-break"},[t._v("部门销售比")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.EditGroup(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.btnGoRoyalty(e.$index,e.row)}}},[t._v("设置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.deleteGroup(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"奖惩设置",name:"StaffReward"}})],1),a("el-dialog",{attrs:{title:t.deductInfo.RoyaltyTitle,visible:t.dialogRoyalty,width:"600px"},on:{"update:visible":function(e){t.dialogRoyalty=e}}},[a("el-form",{staticClass:"dia-form",attrs:{model:t.deductInfo,"label-width":t.formLabelRoyalty}},[a("el-form-item",{attrs:{label:"提成名称"}},[a("el-input",{staticClass:"dia-inp",attrs:{placeholder:"请输入提成名称",autocomplete:"off"},model:{value:t.deductInfo.deduction_name,callback:function(e){t.$set(t.deductInfo,"deduction_name",e)},expression:"deductInfo.deduction_name"}})],1),a("el-form-item",{attrs:{label:"提成类型",prop:"deductionType"}},[a("el-select",{staticClass:"dia-inp",attrs:{placeholder:"请选择提成类型"},model:{value:t.deductInfo.deductionType,callback:function(e){t.$set(t.deductInfo,"deductionType",e)},expression:"deductInfo.deductionType"}},t._l(t.deduction_type2,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.dialogRoyalty=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.btnLoad.state},on:{click:function(e){return t.sureDiaRoyalty()}}},[t._v(t._s(t.btnLoad.text))])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.setStaffRoyalty,expression:"setStaffRoyalty"}]},[a("navBread",{attrs:{breadTitle:"提成设置",breadContent1:"提成编辑"},on:{GoBack:function(e){return t.goBack("tabStaffSalary","setStaffRoyalty")}}}),t.isReloadData?a("div",{staticClass:"addForm-box"},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr btn-search",attrs:{type:"primary"},on:{click:t.btnAddSetRoyalty}},[t._v("添加设置")])],1),a("el-table",{staticClass:"pub-table",attrs:{data:t.setTableRoyalty,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"200px"}}),a("el-table-column",{attrs:{prop:"dn",label:"下限"}}),a("el-table-column",{attrs:{prop:"up",label:"上限"}}),a("el-table-column",{attrs:{prop:"ratio",label:"百分比"}}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.EditSetUp(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.deleteSetUp(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,1119260050)})],1)],1):t._e()],1),a("el-dialog",{attrs:{title:t.setRoyalty.setTitle,visible:t.dialogSetRoyalty,width:"600px"},on:{"update:visible":function(e){t.dialogSetRoyalty=e}}},[a("el-form",{ref:"setRoyalty1",staticClass:"dia-form",attrs:{model:t.setRoyalty,"label-width":t.formLabelRoyalty,rules:t.setRules}},[a("el-form-item",{attrs:{label:"提成下限",prop:"dn"}},[a("el-input",{staticClass:"dia-inp",attrs:{placeholder:"请输入提成下限",autocomplete:"off"},model:{value:t.setRoyalty.dn,callback:function(e){t.$set(t.setRoyalty,"dn",e)},expression:"setRoyalty.dn"}})],1),a("el-form-item",{attrs:{label:"提成上限",prop:"up"}},[a("el-input",{staticClass:"dia-inp",attrs:{placeholder:"请输入提成上限",autocomplete:"off"},model:{value:t.setRoyalty.up,callback:function(e){t.$set(t.setRoyalty,"up",e)},expression:"setRoyalty.up"}})],1),a("el-form-item",{attrs:{label:"提成比例",prop:"ratio"}},[a("el-input",{staticClass:"dia-inp",attrs:{placeholder:"请输入提成比例",autocomplete:"off"},model:{value:t.setRoyalty.ratio,callback:function(e){t.$set(t.setRoyalty,"ratio",e)},expression:"setRoyalty.ratio"}})],1),a("el-form-item",[a("el-button",{attrs:{plain:""},on:{click:function(e){t.dialogSetRoyalty=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.btnLoad.state},on:{click:function(e){return t.sureDiaSetUp("setRoyalty1")}}},[t._v(t._s(t.btnLoad.text))])],1)],1)],1)],1)},n=[],s=(a("7f7f"),a("e6f4")),l=a("db82"),i=a("a474"),c={inject:["reLoad"],name:"StaffReword",data:function(){return{isReloadData:!0,activeTabName:"StaffReward",tabLazy:!0,lockState:[{lock:0,value:"在职"},{lock:1,value:"离职"}],lockStateVal:0,userTypeList:this.GLOBAL.userTypeList,userTypeListVal:1e4,staffInpVal:"",tableStaff:[],pageTotalRows:0,pageListRows:0,staffPage:1,dialogRoyalty:!1,btnLoad:{state:!1,text:"确定"},formLabelWidth:"120px",deductInfo:{RoyaltyTitle:"",zmtek_ver:2,type:1,deduction_name:"",deductionType:"",id:""},deduction_type2:[{id:"1",name:"个人销售比"},{id:"2",name:"部门销售比"}],tableRoyalty:[],formLabelRoyalty:"90px",tabStaffSalary:!0,setStaffRoyalty:!1,dialogSetRoyalty:!1,setTableRoyalty:[],setRoyalty:{setTitle:"",zmtek_ver:2,type:1,ratio_id:1,id:"",up:"",dn:"",ratio:""},setRules:{up:[{required:!0,message:"提成上限不能为空",trigger:"blur"}],dn:[{required:!0,message:"提成下限不能为空",trigger:"blur"}],ratio:[{required:!0,message:"提成比例不能为空",trigger:"blur"}]}}},methods:{getMonthScreen:function(t){console.log(t)},getMonthScreen2:function(t){console.log(t)},tabTotal:function(t,e){var a=t.name;this.callTabApi(a)},btnSeaStaff:function(){},checkedStaff:function(){},PageCurrent:function(){},getStaffDeduct:function(){var t=this;Object(i["w"])({zmtek_ver:this.deductInfo.zmtek_ver,type:this.deductInfo.type,deduction_name:this.deductInfo.deduction_name,deduction_type:this.deductInfo.deductionType,id:this.deductInfo.id}).then((function(e){console.log(e.data);var a=t.deductInfo.type;console.log(a),t.btnLoad={state:!1,text:"确定"},1==e.status&&(1==a?t.tableRoyalty=e.data:(t.$message.success(e.info),setTimeout((function(){t.dialogRoyalty=!1,t.reLoad()}),1e3))),0==e.status&&console.log(e.info)})).catch((function(t){console.log(t)}))},btnAddRoyalty:function(){this.deductInfo.RoyaltyTitle="添加提成",this.deductInfo.type=2,console.log(this.deductInfo),this.dialogRoyalty=!0},sureDiaRoyalty:function(){console.log(this.deductInfo);var t=this.deductInfo.deduction_name;if(console.log(t),""==t)this.$message.error("提成名称 不能为空");else{this.btnLoad={state:!0,text:"提交中"};this.deductInfo.id;this.getStaffDeduct()}},EditGroup:function(t,e){console.log(t,e),this.deductInfo.id=e.id,this.deductInfo.deductionType=e.deduction_type,this.deductInfo.deduction_name=e.deduction_name,this.deductInfo.RoyaltyTitle="提成编辑",this.deductInfo.type=3,this.dialogRoyalty=!0},deleteGroup:function(t,e){var a=this;this.$confirm("确定删除该提成方式？？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e.id),a.deductInfo.type=4,a.deductInfo.id=e.id,a.getStaffDeduct()})).catch((function(){}))},btnGoRoyalty:function(t,e){var a=e.id;console.log("ratio_id"+a),this.setRoyalty.ratio_id=a,this.setRoyalty.type=1,this.setTableRoyalty=[],this.getStaffPhases(),sessionStorage.setItem("sessionSetRoyalty",!0),this.tabStaffSalary=!1,this.setStaffRoyalty=!0},getStaffPhases:function(){var t=this;Object(i["A"])({zmtek_ver:this.setRoyalty.zmtek_ver,type:this.setRoyalty.type,ratio_id:this.setRoyalty.ratio_id,id:this.setRoyalty.id,up:this.setRoyalty.up,dn:this.setRoyalty.dn,ratio:this.setRoyalty.ratio}).then((function(e){console.log(e.data);var a=t.setRoyalty.type;console.log("当前状态： "+a),t.btnLoad={state:!1,text:"确定"},1==e.status&&(1==a?t.setTableRoyalty=e.data:(t.$message.success(e.info),setTimeout((function(){t.dialogSetRoyalty=!1,t.reLoad()}),1e3))),0==e.status&&console.log(e.info)})).catch((function(t){console.log(t)}))},btnAddSetRoyalty:function(){this.setRoyalty.RoyaltyTitle="提成设置",this.setRoyalty=[],this.setRoyalty.type=2,console.log(this.deductInfo),this.dialogSetRoyalty=!0},sureDiaSetUp:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.btnLoad={state:!0,text:"确定"},e.getStaffPhases()}))},EditSetUp:function(t,e){this.setRoyalty=e,this.setRoyalty.setTitle="编辑提成",this.setRoyalty.type=3,this.dialogSetRoyalty=!0},deleteSetUp:function(t,e){var a=this;this.$confirm("确定删除？？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.setRoyalty.type=4,a.setRoyalty.id=e.id,a.getStaffPhases()})).catch((function(){}))},goBack:function(t,e){console.log(t),this[t]=!0,this[e]=!1,sessionStorage.setItem("sessionSetRoyalty",!1)},callTabApi:function(t){console.log("当前tab："+t),"StaffRoyalty"==t&&this.getStaffDeduct()}},created:function(){var t=this.activeTabName;this.callTabApi(t),this.getStaffPhases();var e=window.sessionStorage.getItem("sessionSetRoyalty");console.log(e),"true"==e?(this.tabStaffSalary=!1,this.setStaffRoyalty=!0):(this.tabStaffSalary=!0,this.setStaffRoyalty=!1)},mounted:function(){this.getStaffPhases()},components:{navBread:s["a"],monthSceen:l["a"]}},r=c,u=(a("b8b0"),a("2877")),d=Object(u["a"])(r,o,n,!1,null,null,null);e["default"]=d.exports},5033:function(t,e,a){"use strict";var o=a("99a1"),n=a.n(o);n.a},"99a1":function(t,e,a){},b8b0:function(t,e,a){"use strict";var o=a("2bfa"),n=a.n(o);n.a},db82:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"time-box"},[a("div",{staticClass:"time-val flex-between"},[t._v("\n        "+t._s(t.monthScreen.monthText)+"\n        "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-date-picker",{staticClass:"time-sel",attrs:{type:"month",placeholder:"选择月","value-format":"yyyy年MM月","picker-options":t.pickerOptions2},on:{change:t.monthSel},model:{value:t.monthScreen.monthVal,callback:function(e){t.$set(t.monthScreen,"monthVal",e)},expression:"monthScreen.monthVal"}})],1)},n=[],s={name:"monthSceen",data:function(){var t=this;return{monthScreen:{monthVal:"",monthText:"过去30天",time:"30",day:""},pickerOptions2:{shortcuts:[{text:"今天",onClick:function(e){t.$emit("getMonthScreen",t.monthScreen),t.monthScreen={monthVal:"",monthText:"今天",time:"2",day:""},e.$emit("pick",[new Date,new Date])}},{text:"昨天",onClick:function(e){e.$emit("pick"),t.monthScreen={monthVal:"",monthText:"昨天",time:"1",day:""},t.$emit("getMonthScreen",t.monthScreen)}},{text:"过去七天",onClick:function(e){e.$emit("pick"),t.monthScreen={monthVal:"",monthText:"过去七天",time:"7",day:""},t.$emit("getMonthScreen",t.monthScreen)}},{text:"过去30天",onClick:function(e){e.$emit("pick"),t.monthScreen={monthVal:"",monthText:"过去30天",time:"30",day:""},t.$emit("getMonthScreen",t.monthScreen)}}]}}},methods:{monthSel:function(t){var e=this.monthScreen.monthVal;e&&(this.monthScreen={monthVal:t,monthText:t,time:"",day:t},this.$emit("getMonthScreen",this.monthScreen))}},created:function(){}},l=s,i=a("2877"),c=Object(i["a"])(l,o,n,!1,null,"1ae059c1",null);e["a"]=c.exports},e6f4:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticClass:"nav-bread",attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("span",{staticClass:"hover-bread",on:{click:function(e){return t.$emit("GoBack")}}},[a("i",{staticClass:"el-icon-back"}),t._v(t._s(t.breadTitle)+"\n            ")])]),a("el-breadcrumb-item",[t._v(t._s(t.breadContent1))])],1)],1)},n=[],s=a("a026");a("3c4e");const l=Object.prototype.hasOwnProperty;function i(t,e){return l.call(t,e)}const c=/(%|)\{([0-9a-zA-Z_]+)\}/g;var r=function(t){function e(t,...e){return 1===e.length&&"object"===typeof e[0]&&(e=e[0]),e&&e.hasOwnProperty||(e={}),t.replace(c,(a,o,n,s)=>{let l;return"{"===t[s-1]&&"}"===t[s+a.length]?n:(l=i(e,n)?e[n]:null,null===l||void 0===l?"":l)})}return e};r(s["default"]);var u={name:"navBread",props:{breadTitle:{type:String,default:function(){return"首页"}},breadContent1:{type:String,default:function(){return""}},breadContent2:{type:String,default:function(){return""}}},data:function(){return{}},methods:{},created:function(){}},d=u,f=(a("5033"),a("2877")),y=Object(f["a"])(d,o,n,!1,null,"20808f96",null);e["a"]=y.exports}}]);