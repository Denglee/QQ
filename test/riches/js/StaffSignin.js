(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StaffSignin"],{3389:function(t,e,a){"use strict";var s=a("38b3"),l=a.n(s);l.a},"38b3":function(t,e,a){},7676:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layoutR-main"},[a("el-tabs",{staticClass:"vip-tabBox pubWidth",attrs:{id:"staffPay-tabBox"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"打卡记录",name:"StaffSalary"}},[a("form",{staticClass:"pt-screen"},[a("el-input",{staticClass:"inp-mar14 pt-screen-input",attrs:{placeholder:"请输入会员姓名、电话",clearable:""},model:{value:t.staffName,callback:function(e){t.staffName=e},expression:"staffName"}}),a("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{placeholder:"请选择月份",type:"month","value-format":"yyyy-MM"},model:{value:t.staffMonth,callback:function(e){t.staffMonth=e},expression:"staffMonth"}}),a("el-button",{staticClass:"btn-search",attrs:{icon:"el-icon-search"},on:{click:t.btnSeaStaffSignin}},[t._v("搜索")]),a("el-button",{staticClass:"btn-search fr",attrs:{icon:"el-icon-notebook-1"},on:{click:t.singExport}},[t._v("导出")])],1),a("div",{},[a("table",{staticClass:"staffSign-table"},[a("thead",[a("tr",{staticClass:"thead"},[a("th",{staticClass:"cell"},[t._v("姓名")]),t._l(t.signStaffList,(function(e,s){return a("th",{key:s},[a("div",{staticClass:"cell"},[t._v(t._s(e.name))])])}))],2)]),a("tbody",[a("tr",[a("td",{staticClass:"cell"},[t._v("统计")]),t._l(t.signStaffList,(function(e,s){return a("td",{key:s},[a("div",{staticClass:"cell sign-up"},[t._v("上班："+t._s(e.up)+"天")]),a("div",{staticClass:"cell sign-rest"},[t._v("休息："+t._s(e.rest)+"天")]),a("div",{staticClass:"cell sign-warn"},[a("i",{staticClass:"el-icon-warning"}),t._v("异常："+t._s(e.abnormal)+"天")])])}))],2),t._l(t.signStaffDate,(function(e,s){return a("tr",{key:s},[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(e.day))])]),t._l(e.check,(function(e,s){return a("td",{key:s},[a("div",{staticClass:"cell clock-in"},[t._v(t._s(e.clockin))]),a("div",{staticClass:"cell clock-out"},[t._v(t._s(e.clockout))])])}))],2)}))],2)]),a("div",{staticClass:"page-assist"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total,jumper",total:t.pageTotalRows,"page-size":t.pageListRows},on:{"current-change":t.PageCurrent}})],1)])]),a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"班次设置",name:"StaffRoyalty"}},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr btn-search",attrs:{type:"primary"},on:{click:t.btnSetTime}},[t._v("设置")])],1),a("el-table",{staticClass:"pub-table",attrs:{data:t.tableClassTime,border:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"name",label:"班次"}}),a("el-table-column",{attrs:{label:"上班时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.FormalTime[0]))])]}}])}),a("el-table-column",{attrs:{label:"下班时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.FormalTime[1]))])]}}])}),a("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.goStaffIndex(e.$index,e.row)}}},[t._v("此班人员")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:"班次编辑",visible:t.EditTimeForm},on:{"update:visible":function(e){t.EditTimeForm=e}}},[a("el-form",{attrs:{model:t.tableClassTime[0],"label-width":t.formLabelWidth}},[a("el-form-item",{attrs:{label:"正班"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH：mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tableClassTime[0].FormalTime,callback:function(e){t.$set(t.tableClassTime[0],"FormalTime",e)},expression:"tableClassTime[0].FormalTime"}})],1),a("el-form-item",{attrs:{label:"早班"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH：mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tableClassTime[1].FormalTime,callback:function(e){t.$set(t.tableClassTime[1],"FormalTime",e)},expression:"tableClassTime[1].FormalTime"}})],1),a("el-form-item",{attrs:{label:"午班"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH：mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tableClassTime[2].FormalTime,callback:function(e){t.$set(t.tableClassTime[2],"FormalTime",e)},expression:"tableClassTime[2].FormalTime"}})],1),a("el-form-item",{attrs:{label:"晚班"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH：mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tableClassTime[3].FormalTime,callback:function(e){t.$set(t.tableClassTime[3],"FormalTime",e)},expression:"tableClassTime[3].FormalTime"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditTimeForm=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sureDialogTIme()}}},[t._v("确 定")])],1)],1)],1)},l=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),r=a("2f62"),o=a("a474");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"Staffsignin",data:function(){return{activeName:"StaffRoyalty",tabLazy:!0,formLabelWidth:"120px",signStaffList:[],signStaffDate:[],staffName:"",staffMonth:"",pageTotalRows:0,pageListRows:0,staffPage:1,EditTimeForm:!1,tableClassTime:[{lock:0,name:"正班",FormalTime:["09:00","18:00"]},{lock:2,name:"早班",FormalTime:["09:00","18:00"]},{lock:3,name:"中班",FormalTime:["13:30","18:00"]},{lock:4,name:"晚班",FormalTime:["18:00","22:00"]}]}},methods:c({},Object(r["b"])({ActSaveStaffClasses:"StoreTagNav/ActSaveStaffClasses"}),{getStaffSignin:function(){var t=this;Object(o["x"])({zmtek_ver:2,p:this.staffPage,keywords:this.staffName,starttime:this.staffMonth}).then((function(e){1==e.status&&(console.log(e),t.signStaffList=e.data.staff.list,t.signStaffDate=e.data.date,t.pageTotalRows=Number(e.data.staff.totalRows),t.pageListRows=e.data.staff.listRows)})).catch((function(t){console.log(t)}))},btnSeaStaffSignin:function(){this.staffPage=1,this.getStaffSignin()},PageCurrent:function(t){this.staffPage=t,this.getStaffSignin()},singExport:function(){var t=this.GLOBAL.localUrl,e=this.staffPage,a=this.staffName,s=this.staffMonth;""==s&&(s=this.$moment().format("YYYY-MM"));var l=t+"/staff/excel_sign.html?zmtek_ver=2&p="+e+"&keywords="+a+"&starttime="+s;console.log(l),window.location.href=l},btnSetTime:function(){this.EditTimeForm=!0},sureDialogTIme:function(){this.EditTimeForm=!1},goStaffIndex:function(t,e){this.$router.push({path:"/Staff/index"});var a=e;this.ActSaveStaffClasses(a)}}),created:function(){this.getStaffSignin()}},m=f,u=(a("3389"),a("2877")),b=Object(u["a"])(m,s,l,!1,null,null,null);e["default"]=b.exports}}]);