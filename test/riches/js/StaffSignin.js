(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StaffSignin"],{3389:function(t,e,a){"use strict";var s=a("38b3"),i=a.n(s);i.a},"38b3":function(t,e,a){},7676:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layoutR-main"},[a("el-tabs",{staticClass:"vip-tabBox pubWidth",attrs:{id:"staffPay-tabBox"},on:{"tab-click":t.tabTotal},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"打卡记录",name:"StaffSalary"}},[a("form",{staticClass:"pt-screen"},[a("el-input",{staticClass:"inp-mar14 pt-screen-input",attrs:{placeholder:"请输入会员姓名、电话",clearable:""},model:{value:t.staffName,callback:function(e){t.staffName=e},expression:"staffName"}}),a("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{placeholder:"请选择月份",type:"month","value-format":"yyyy-MM"},model:{value:t.staffMonth,callback:function(e){t.staffMonth=e},expression:"staffMonth"}}),a("el-button",{staticClass:"btn-search",attrs:{icon:"el-icon-search"},on:{click:t.btnSeaStaffSignin}},[t._v("搜索")]),a("el-button",{staticClass:"btn-search fr",attrs:{icon:"el-icon-notebook-1"},on:{click:t.singExport}},[t._v("导出")])],1),a("div",{},[a("table",{staticClass:"staffSign-table"},[a("thead",[a("tr",{staticClass:"thead"},[a("th",{staticClass:"cell"},[t._v("姓名")]),t._l(t.signStaffList,(function(e,s){return a("th",{key:s},[a("div",{staticClass:"cell"},[t._v(t._s(e.name))])])}))],2)]),a("tbody",[a("tr",[a("td",{staticClass:"cell"},[t._v("统计")]),t._l(t.signStaffList,(function(e,s){return a("td",{key:s},[a("div",{staticClass:"cell sign-up"},[t._v("上班："+t._s(e.up)+"天")]),a("div",{staticClass:"cell sign-rest"},[t._v("休息："+t._s(e.rest)+"天")]),a("div",{staticClass:"cell sign-warn"},[a("i",{staticClass:"el-icon-warning"}),t._v("异常："+t._s(e.abnormal)+"天")])])}))],2),t._l(t.signStaffDate,(function(e,s){return a("tr",{key:s},[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(e.day))])]),t._l(e.check,(function(e,s){return a("td",{key:s},[a("div",{staticClass:"cell clock-in"},[t._v(t._s(e.clockin))]),a("div",{staticClass:"cell clock-out"},[t._v(t._s(e.clockout))])])}))],2)}))],2)]),a("div",{staticClass:"page-assist"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total,jumper",total:t.pageTotalRows,"page-size":t.pageListRows},on:{"current-change":t.PageCurrent}})],1)])]),a("el-tab-pane",{attrs:{lazy:t.tabLazy,label:"班次设置",name:"StaffRoyalty"}},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fr btn-search",attrs:{type:"primary"},on:{click:t.btnSetTime}},[t._v("设置")])],1),a("table",{staticClass:"staffClass-table"},[a("thead",[a("tr",[a("th"),a("th",[t._v("班次")]),a("th",[t._v("上班时间")]),a("th",[t._v("下班时间")]),a("th",[t._v("查看")])])]),a("tbody",[a("tr",[a("td",[t._v("1")]),a("td",[t._v("正班")]),a("td",[t._v(t._s(t.calssTimeForm.start_time))]),a("td",[t._v(t._s(t.calssTimeForm.end_time)+" ")]),a("td",[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.goStaffIndex("1")}}},[t._v("此班人员")])],1)]),a("tr",[a("td",[t._v("2")]),a("td",[t._v("早班")]),a("td",[t._v(t._s(t.calssTimeForm.start_time_m))]),a("td",[t._v(t._s(t.calssTimeForm.end_time_m))]),a("td",[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.goStaffIndex("2")}}},[t._v("此班人员")])],1)]),a("tr",[a("td",[t._v("3")]),a("td",[t._v("中班")]),a("td",[t._v(t._s(t.calssTimeForm.start_time_a))]),a("td",[t._v(t._s(t.calssTimeForm.end_time_a))]),a("td",[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.goStaffIndex("3")}}},[t._v("此班人员")])],1)]),a("tr",[a("td",[t._v("4")]),a("td",[t._v("晚班")]),a("td",[t._v(t._s(t.calssTimeForm.start_time_e)+" ")]),a("td",[t._v(t._s(t.calssTimeForm.end_time_e)+" ")]),a("td",[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.goStaffIndex("4")}}},[t._v("此班人员")])],1)])])])])],1),a("el-dialog",{attrs:{title:"班次设置",visible:t.EditTimeForm},on:{"update:visible":function(e){t.EditTimeForm=e}}},[a("el-form",{staticClass:"class-time",attrs:{"label-width":t.formLabelWidth},model:{value:t.calssTimeForm,callback:function(e){t.calssTimeForm=e},expression:"calssTimeForm"}},[a("el-form-item",{attrs:{label:"正班"}},[a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.start_time,callback:function(e){t.$set(t.calssTimeForm,"start_time",e)},expression:"calssTimeForm.start_time"}}),a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.end_time,callback:function(e){t.$set(t.calssTimeForm,"end_time",e)},expression:"calssTimeForm.end_time"}})],1),a("el-form-item",{attrs:{label:"早班"}},[a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.start_time_m,callback:function(e){t.$set(t.calssTimeForm,"start_time_m",e)},expression:"calssTimeForm.start_time_m"}}),a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.end_time_m,callback:function(e){t.$set(t.calssTimeForm,"end_time_m",e)},expression:"calssTimeForm.end_time_m"}})],1),a("el-form-item",{attrs:{label:"正班"}},[a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.start_time_a,callback:function(e){t.$set(t.calssTimeForm,"start_time_a",e)},expression:"calssTimeForm.start_time_a"}}),a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.end_time_a,callback:function(e){t.$set(t.calssTimeForm,"end_time_a",e)},expression:"calssTimeForm.end_time_a"}})],1),a("el-form-item",{attrs:{label:"正班"}},[a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.start_time_e,callback:function(e){t.$set(t.calssTimeForm,"start_time_e",e)},expression:"calssTimeForm.start_time_e"}}),a("el-time-picker",{attrs:{placeholder:"选择时间","value-format":"HH:mm",format:"HH:mm"},model:{value:t.calssTimeForm.end_time_e,callback:function(e){t.$set(t.calssTimeForm,"end_time_e",e)},expression:"calssTimeForm.end_time_e"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditTimeForm=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.sureDiaTime},on:{click:function(e){return t.sureDialogTIme()}}},[t._v("确 定")])],1)],1)],1)},i=[],m=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("7f7f"),a("bd86")),r=a("2f62"),o=a("a474");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(m["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={inject:["reLoad"],name:"Staffsignin",data:function(){return{activeName:"StaffSalary",tabLazy:!0,formLabelWidth:"120px",signStaffList:[],signStaffDate:[],staffName:"",staffMonth:"",pageTotalRows:0,pageListRows:0,staffPage:1,EditTimeForm:!1,sureDiaTime:!1,calssTimeForm:{zmtek_ver:2,type:2,start_time:"",end_time:"",start_time_m:"",end_time_m:"",start_time_a:"",end_time_a:"",start_time_e:"",end_time_e:""}}},methods:n({},Object(r["b"])({ActSaveStaffClasses:"StoreTagNav/ActSaveStaffClasses"}),{tabTotal:function(t,e){var a=t.name;sessionStorage.setItem("StaffSignTabName",a)},getStaffSignin:function(){var t=this;Object(o["F"])({zmtek_ver:2,p:this.staffPage,keywords:this.staffName,starttime:this.staffMonth}).then((function(e){1==e.status&&(console.log(e),t.signStaffList=e.data.staff.list,t.signStaffDate=e.data.date,t.pageTotalRows=Number(e.data.staff.totalRows),t.pageListRows=e.data.staff.listRows)})).catch((function(t){console.log(t)}))},btnSeaStaffSignin:function(){this.staffPage=1,this.getStaffSignin()},PageCurrent:function(t){this.staffPage=t,this.getStaffSignin()},singExport:function(){var t=this.GLOBAL.localUrl,e=this.staffPage,a=this.staffName,s=this.staffMonth;""==s&&(s=this.$moment().format("YYYY-MM"));var i=t+"/staff/excel_sign.html?zmtek_ver=2&p="+e+"&keywords="+a+"&starttime="+s;console.log(i),window.location.href=i},staffSetcommutertime:function(){var t=this;Object(o["E"])(this.calssTimeForm).then((function(e){1==e.status?(console.log(e),2==t.calssTimeForm.type&&(t.calssTimeForm.start_time=e.data.commuterup_time,t.calssTimeForm.end_time=e.data.commuterdn_time,t.calssTimeForm.start_time_m=e.data.commuterup_time_m,t.calssTimeForm.end_time_m=e.data.commuterdn_time_m,t.calssTimeForm.start_time_a=e.data.commuterup_time_a,t.calssTimeForm.end_time_a=e.data.commuterdn_time_a,t.calssTimeForm.start_time_e=e.data.commuterup_time_e,t.calssTimeForm.end_time_e=e.data.commuterdn_time_e),1==t.calssTimeForm.type&&(t.$message.success(e.info),setTimeout((function(){t.EditTimeForm=!1}),1e3))):t.$message.error(e.info)})).catch((function(t){console.log(t)}))},btnSetTime:function(){this.EditTimeForm=!0},sureDialogTIme:function(){var t=this;this.sureDiaTime=!0,this.calssTimeForm.type=1,this.staffSetcommutertime(),setTimeout((function(){t.sureDiaTime=!1}),1e3)},goStaffIndex:function(t){this.$router.push({path:"/Staff/index"});var e=t;console.log(t),this.ActSaveStaffClasses(e)}}),created:function(){this.getStaffSignin();var t=sessionStorage.getItem("StaffSignTabName");null==t?t=this.activeName:this.activeName=t,this.staffSetcommutertime()}},f=c,_=(a("3389"),a("2877")),u=Object(_["a"])(f,s,i,!1,null,null,null);e["default"]=u.exports}}]);