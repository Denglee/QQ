(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StatisRevenue"],{"0408":function(e,t,n){},"0ce3":function(e,t,n){},"28a5":function(e,t,n){"use strict";var a=n("aae3"),i=n("cb7c"),o=n("ebd6"),r=n("0390"),s=n("9def"),l=n("5f1b"),c=n("520a"),u=n("79e5"),v=Math.min,p=[].push,d="split",h="length",f="lastIndex",b=4294967295,g=!u((function(){RegExp(b,"y")}));n("214f")("split",2,(function(e,t,n,u){var m;return m="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!a(e))return n.call(i,e,t);var o,r,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,d=void 0===t?b:t>>>0,g=new RegExp(e.source,u+"g");while(o=c.call(g,i)){if(r=g[f],r>v&&(l.push(i.slice(v,o.index)),o[h]>1&&o.index<i[h]&&p.apply(l,o.slice(1)),s=o[0][h],v=r,l[h]>=d))break;g[f]===o.index&&g[f]++}return v===i[h]?!s&&g.test("")||l.push(""):l.push(i.slice(v)),l[h]>d?l.slice(0,d):l}:"0"[d](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,a){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,a):m.call(String(i),n,a)},function(e,t){var a=u(m,e,this,t,m!==n);if(a.done)return a.value;var c=i(e),p=String(this),d=o(c,RegExp),h=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),y=new d(g?c:"^(?:"+c.source+")",f),x=void 0===t?b:t>>>0;if(0===x)return[];if(0===p.length)return null===l(y,p)?[p]:[];var C=0,E=0,w=[];while(E<p.length){y.lastIndex=g?E:0;var S,_=l(y,g?p:p.slice(E));if(null===_||(S=v(s(y.lastIndex+(g?0:E)),p.length))===C)E=r(p,E,h);else{if(w.push(p.slice(C,E)),w.length===x)return w;for(var R=1;R<=_.length-1;R++)if(w.push(_[R]),w.length===x)return w;E=C=S}}return w.push(p.slice(C)),w}]}))},"454f":function(e,t,n){n("46a7");var a=n("584a").Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},"456d":function(e,t,n){var a=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(e){return i(a(e))}}))},"46a7":function(e,t,n){var a=n("63b6");a(a.S+a.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},5033:function(e,t,n){"use strict";var a=n("99a1"),i=n.n(a);i.a},"545a":function(e,t,n){"use strict";var a=n("0408"),i=n.n(a);i.a},"5eda":function(e,t,n){var a=n("5ca1"),i=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],r={};r[e]=t(n),a(a.S+a.F*o((function(){n(1)})),"Object",r)}},"7a75":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return r}));var a={tooltip:{trigger:"axis",textStyle:{fontSize:12}},grid:{top:"30px",left:"4%",right:"4%",bottom:"4%",width:"92%",height:"80%"},xAxis:{axisTick:{alignWithLabel:!0},type:"category",axisLine:{lineStyle:{color:"#8E8E8E"}},axisLabel:{margin:15,textStyle:{color:"#8E8E8E"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8E8E8E"}}},series:{type:"line",symbolSize:9,lineStyle:{normal:{type:"dashed"}}}},i={grid:{top:"30px",left:"10px",right:"20px",bottom:"10px"},xAxis:{axisTick:{alignWithLabel:!0},type:"category",axisLine:{lineStyle:{color:"#8E8E8E"}},axisLabel:{margin:15,textStyle:{color:"#8E8E8E"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8E8E8E"}}},series:{barWidth:30}},o={grid:{top:"30px",left:"10px",right:"20px",bottom:"10px"},xAxis:{axisTick:{alignWithLabel:!0},type:"category",axisLine:{lineStyle:{color:"#8E8E8E"}},axisLabel:{margin:15,textStyle:{color:"#8E8E8E"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8E8E8E"}}},series:{barWidth:30,itemStyle:{normal:{color:function(e){var t=["#84CCC9","#AA89BD","#F19EC2","#FF8A7E","#00A0E9","#0000FF","#FFBE00","#00B7EE"];return t[e.dataIndex]}}}}},r={grid:{left:"3%",right:"4%",bottom:"10px",top:"10px",containLabel:!0},series:{barWidth:30,type:"bar",itemStyle:{normal:{color:function(e){var t=["#84CCC9","#AA89BD","#F19EC2","#FF8A7E","#00A0E9","#0000FF","#FFBE00","#00B7EE"];return t[e.dataIndex]}}}}},s={series:{radius:"70%",center:["50%","40%"],label:{normal:{position:"inner",show:!1}},labelLine:{normal:{show:!1}}}}},"85f2":function(e,t,n){e.exports=n("454f")},"8e6e":function(e,t,n){var a=n("5ca1"),i=n("990b"),o=n("6821"),r=n("11e9"),s=n("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(e){var t,n,a=o(e),l=r.f,c=i(a),u={},v=0;while(c.length>v)n=l(a,t=c[v++]),void 0!==n&&s(u,t,n);return u}})},9872:function(e,t,n){"use strict";var a=n("0ce3"),i=n.n(a);i.a},"990b":function(e,t,n){var a=n("9093"),i=n("2621"),o=n("cb7c"),r=n("7726").Reflect;e.exports=r&&r.ownKeys||function(e){var t=a.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},"99a1":function(e,t,n){},a85f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layoutR-main"},[n("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.showState.tabRevenueState,expression:"showState.tabRevenueState"}],staticClass:"vip-tabBox pubWidth",attrs:{id:"staffPay-tabBox"},on:{"tab-click":e.tabTotal},model:{value:e.tabInfo.activeTabName,callback:function(t){e.$set(e.tabInfo,"activeTabName",t)},expression:"tabInfo.activeTabName"}},[n("el-tab-pane",{attrs:{lazy:e.tabInfo.tabLazy,label:"营收总览",name:"revenueTotal"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:8,lg:8}},[n("div",{staticClass:"index-item revenue-item"},[n("header",{staticClass:"index-item-title"},[n("div",{staticClass:"title"},[e._v("总收入")])]),n("ul",{staticClass:"index-item-tipUl"},[n("li",[n("span",{staticClass:"addVip-tagB"}),e._v("上月")]),n("li",[n("span",{staticClass:"addVip-tagY"}),e._v("本月")])]),n("div",{staticClass:"flex-between revenueRatio-tip clearfix chart"},[n("ve-pie",{style:e.picStyle,attrs:{data:e.revenueTotal,"legend-visible":!1,colors:e.totalColor,extend:e.picExtend}}),n("ul",{staticClass:"vipNum"},[n("li",[e._v("上月："),n("span",{staticClass:"vipTipB"},[e._v(e._s(e.revenueTotal.rows[0].value))]),e.revenueRatio.lastMonth>0?n("span",{staticClass:"vipTipB revenue-tip"},[n("i",{staticClass:"el-icon-top"}),e._v("\n                                        "+e._s(e.revenueRatio.lastMonth)+"\n                                    ")]):n("span",{staticClass:"vipTipB revenue-tip"},[n("i",{staticClass:"el-icon-bottom"}),e._v(e._s(e._f("mathFloor")(e.revenueRatio.lastMonth))+"\n                                    ")])]),n("li",[e._v("本月："),n("span",{staticClass:"vipTipY"},[e._v(e._s(e.revenueTotal.rows[1].value))]),e.revenueRatio.nowMonth>0?n("span",{staticClass:"vipTipB revenue-tip"},[n("i",{staticClass:"el-icon-top"}),e._v(e._s(e.revenueRatio.nowMonth)+"\n                                    ")]):n("span",{staticClass:"vipTipY revenue-tip"},[n("i",{staticClass:"el-icon-bottom"}),e._v(e._s(e._f("mathFloor")(e.revenueRatio.nowMonth))+"\n                                    ")])])])],1)])]),n("el-col",{attrs:{md:8,lg:8}},[n("div",{staticClass:"index-item revenue-item"},[n("header",{staticClass:"index-item-title",on:{click:function(t){return e.changeData(t)}}},[n("div",{staticClass:"title"},[e._v("项目营收排名")])]),n("ul",{staticClass:"index-item-tipUl"},e._l(e.revenueRanking.rows,(function(t,a){return n("li",{key:a},[n("span",{staticClass:"revenueRanking-span",class:t.class}),e._v(" "+e._s(t.name))])})),0),n("div",{staticClass:"chartRevenue"},[n("ve-histogram",{style:e.histogramStyle,attrs:{data:e.revenueRanking,"legend-visible":!1,colors:e.revenueRankingColor,extend:e.histogramExtend}})],1)])]),n("el-col",{attrs:{md:8,lg:8}},[n("div",{staticClass:"index-item revenue-item",staticStyle:{"padding-bottom":"0"}},[n("header",{staticClass:"index-item-title",on:{click:function(t){return e.changeData(t)}}},[n("div",{staticClass:"title"},[e._v("支付方式排名")])]),n("div",{staticClass:"chartRevenue"},[n("ve-bar",{style:e.barStyle,attrs:{data:e.revenuePayMethods,"legend-visible":!1,colors:e.totalColor,extend:e.barExtend}})],1)])])],1)],1),n("el-tab-pane",{attrs:{lazy:e.tabInfo.tabLazy,label:"营收详细",name:"revenueDetails"}},[n("RevenueDetails")],1)],1)],1)},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),r=(n("7f7f"),n("e6f4")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticClass:"pub-table",staticStyle:{height:"0"},attrs:{data:e.detailList,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"项目"}}),n("el-table-column",{attrs:{prop:"total_number",label:"数量"}}),n("el-table-column",{attrs:{prop:"income",label:"收入"}}),n("el-table-column",{attrs:{prop:"refund_price",label:"退款"}}),n("el-table-column",{attrs:{prop:"total_price",label:"合计"}}),n("el-table-column",{attrs:{label:"流水"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.lookDetail(t.$index,t.row)}}},[e._v("查看")])]}}])})],1),n("div",{staticClass:"pt-screen"},[n("el-select",{staticClass:"inp-mar14",attrs:{multiple:"","collapse-tags":""},on:{change:function(t){return e.chooseProject(t)}},model:{value:e.revenueDetails.projectChoose,callback:function(t){e.$set(e.revenueDetails,"projectChoose",t)},expression:"revenueDetails.projectChoose"}},e._l(e.revenueProject,(function(t,a){return n("el-option",{key:t.index,attrs:{value:t.id,label:t.catname}},[n("span",{staticClass:"check"}),n("span",{staticStyle:{"margin-left":"8px"}},[e._v(e._s(t.catname))])])})),1),n("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.revenueDetails.year,callback:function(t){e.$set(e.revenueDetails,"year",t)},expression:"revenueDetails.year"}}),n("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},model:{value:e.revenueDetails.month,callback:function(t){e.$set(e.revenueDetails,"month",t)},expression:"revenueDetails.month"}}),n("el-button",{staticClass:"btn-search",attrs:{icon:"el-icon-search",loading:e.btnLoad.search},on:{click:e.btnSeaDetail}},[e._v("搜索")])],1),n("el-row",{staticClass:"index-row revenue-box",attrs:{gutter:20}},e._l(e.revenueDetails.projectChoose,(function(t,a){return n("el-col",{attrs:{md:8,lg:6}},e._l(e.revenueProject,(function(a,i){return t==a.id?n("div",{key:i},[n("div",{staticClass:"index-item",on:{click:function(t){return e.goRenDetai(a)}}},[e._v(e._s(t)+" "+e._s(a.catname))])]):e._e()})),0)})),1)],1)},l=[],c=(n("28a5"),n("a474")),u={inject:["reLoad"],name:"StatisRevenueDetails",data:function(){return{btnLoad:{search:!1},revenueProject:[],revenueDetails:{projectChoose:[],month:"",year:""},detailList:[]}},methods:{getRevenueContract:function(){var e=this;Object(c["s"])({type:this.revenueDetails.projectChoose}).then((function(t){console.log(t);var n=t.list;e.detailList=n,e.revenueProject=t.list;var a=sessionStorage.getItem("choosePro");null!=a?e.revenueDetails.projectChoose=a.split(","):(n.forEach((function(t,n){e.revenueDetails.projectChoose.push(t.id)})),sessionStorage.setItem("choosePro",e.revenueDetails.projectChoose))})).catch((function(e){console.log(e)}))},lookDetail:function(e,t){console.log(e),console.log(t)},btnSeaDetail:function(){var e=this;this.btnLoad.search=!0,console.log(this.revenueDetails),setTimeout((function(){e.btnLoad.search=!1}),1500)},chooseProject:function(e){console.log(e),sessionStorage.setItem("choosePro",e)},goRenDetai:function(e){console.log(e)}},created:function(){this.getRevenueContract()}},v=u,p=(n("545a"),n("2877")),d=Object(p["a"])(v,s,l,!1,null,null,null),h=d.exports,f=n("7a75");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"StatisRevenue",data:function(){return this.revenueRankingColor=["#84CCC9","#AA89BD","#F19EC2","#FF8A7E","#00A0E9","#0000FF","#FFBE00","#00B7EE"],this.totalColor=["#005AD4","#FF8A7E"],this.OverdueColor=["#FFBE00","#FF8A7E","#4CCBEB","#005AD4"],this.vipPtColor=["#FFBE00","#FF8A7E","#1EAAA1","#4CCBEB"],this.histogramExtend=f["b"],this.picExtend=f["e"],this.barExtend=f["a"],{revenueRankingClass:[{class:"colorBgGreenLignt",color:"#84CCC9"},{class:"colorBgViolet",color:"#AA89BD"},{class:"colorBgPink",color:"#F19EC2"},{class:"colorBgRed",color:"#FF8A7E"},{class:"colorBgGreen",color:"#00A0E9"},{class:"colorBgBlueDark",color:"#0000FF"},{class:"colorBgYellow",color:"#FFBE00"},{class:"colorBgBlueGreen",color:"#00B7EE"}],tabInfo:{activeTabName:"revenueTotal",tabLazy:!0},showState:{tabRevenueState:!0},hasAxios:{revenueTotal:!1,revenueDetails:!1},histogramStyle:{height:"180px",width:"100%"},barStyle:{height:"240px",width:"98%"},picStyle:{height:"180px",width:"180px"},lineStyle:{height:"180px",width:"100%"},revenueTotal:{columns:["name","value"],rows:[{name:"",value:0},{name:"",value:0}]},revenueRatio:{lastMonth:0,nowMonth:0},revenueRanking:{columns:["name","value"],rows:[]},revenuePayMethods:{columns:["name","value"],rows:[]}}},methods:{tabTotal:function(e,t){var n=e.name;this.callTabApi(n),sessionStorage.setItem("StatisRevenueTabName",n)},getRevenueTotal:function(){var e=this;Object(c["v"])().then((function(t){console.log(t);var n=[],a=t[1],i=t[2];n.push(a,i),e.revenueTotal.rows=n;var o=t[0].value,r=t[1].value,s=t[2].value,l=r-o,c=s-r;e.revenueRatio.lastMonth=l,e.revenueRatio.nowMonth=c,e.hasAxios.revenueTotal=!0})).catch((function(e){console.log(e)}))},getRevenueRanking:function(){var e=this;Object(c["u"])().then((function(t){console.log(t);var n=t;n=n.map((function(t,n){return g({},t,{},e.revenueRankingClass[n])})),e.revenueRanking.rows=n})).catch((function(e){console.log(e)}))},getRevenuePayMethod:function(){var e=this;Object(c["t"])().then((function(t){e.revenuePayMethods.rows=t})).catch((function(e){console.log(e)}))},callTabApi:function(e){console.log(e),"revenueTotal"==e&&0==this.hasAxios.revenueTotal&&(this.getRevenueTotal(),this.getRevenueRanking(),this.getRevenuePayMethod()),"revenueDetails"==e&&this.hasAxios.revenueDetails}},created:function(){var e=sessionStorage.getItem("StatisRevenueTabName");null==e?e=this.tabInfo.activeTabName:this.tabInfo.activeTabName=e,this.callTabApi(e)},components:{navBread:r["a"],RevenueDetails:h}},y=m,x=(n("9872"),Object(p["a"])(y,a,i,!1,null,null,null));t["default"]=x.exports},bd86:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("85f2"),i=n.n(a);function o(e,t,n){return t in e?i()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},e6f4:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-breadcrumb",{staticClass:"nav-bread",attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("span",{staticClass:"hover-bread",on:{click:function(t){return e.$emit("GoBack")}}},[n("i",{staticClass:"el-icon-back"}),e._v(e._s(e.breadTitle)+"\n            ")])]),n("el-breadcrumb-item",[e._v(e._s(e.breadContent1))])],1)],1)},i=[],o=n("a026");n("3c4e");const r=Object.prototype.hasOwnProperty;function s(e,t){return r.call(e,t)}const l=/(%|)\{([0-9a-zA-Z_]+)\}/g;var c=function(e){function t(e,...t){return 1===t.length&&"object"===typeof t[0]&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(l,(n,a,i,o)=>{let r;return"{"===e[o-1]&&"}"===e[o+n.length]?i:(r=s(t,i)?t[i]:null,null===r||void 0===r?"":r)})}return t};c(o["default"]);var u={name:"navBread",props:{breadTitle:{type:String,default:function(){return"首页"}},breadContent1:{type:String,default:function(){return""}},breadContent2:{type:String,default:function(){return""}}},data:function(){return{}},methods:{},created:function(){}},v=u,p=(n("5033"),n("2877")),d=Object(p["a"])(v,a,i,!1,null,"20808f96",null);t["a"]=d.exports},f1ae:function(e,t,n){"use strict";var a=n("86cc"),i=n("4630");e.exports=function(e,t,n){t in e?a.f(e,t,i(0,n)):e[t]=n}}}]);