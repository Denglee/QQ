(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StatisRevenue"],{"0ce3":function(e,t,a){},5033:function(e,t,a){"use strict";var n=a("99a1"),i=a.n(n);i.a},"7a75":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return o}));var n={tooltip:{trigger:"axis",textStyle:{fontSize:12}},grid:{top:"30px",left:"4%",right:"4%",bottom:"4%",width:"92%",height:"80%"},xAxis:{axisTick:{alignWithLabel:!0},type:"category",axisLine:{lineStyle:{color:"#8E8E8E"}},axisLabel:{margin:15,textStyle:{color:"#8E8E8E"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8E8E8E"}}},series:{type:"line",symbolSize:9,lineStyle:{normal:{type:"dashed"}}}},i={grid:{top:"30px",left:"10px",right:"20px",bottom:"10px"},xAxis:{axisTick:{alignWithLabel:!0},type:"category",axisLine:{lineStyle:{color:"#8E8E8E"}},axisLabel:{margin:15,textStyle:{color:"#8E8E8E"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8E8E8E"}}},series:{barWidth:30}},o={grid:{left:"3%",right:"4%",bottom:"10px",top:"10px",containLabel:!0},series:{barWidth:30}},l={series:{radius:"70%",center:["50%","40%"],labelLine:{normal:{show:!1}}}}},9872:function(e,t,a){"use strict";var n=a("0ce3"),i=a.n(n);i.a},"99a1":function(e,t,a){},a85f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layoutR-main"},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.showState.tabRevenueState,expression:"showState.tabRevenueState"}],staticClass:"vip-tabBox pubWidth",attrs:{id:"staffPay-tabBox"},on:{"tab-click":e.tabTotal},model:{value:e.tabInfo.activeTabName,callback:function(t){e.$set(e.tabInfo,"activeTabName",t)},expression:"tabInfo.activeTabName"}},[a("el-tab-pane",{attrs:{lazy:e.tabInfo.tabLazy,label:"营收总览",name:"revenueTotal"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:8,lg:8}},[a("div",{staticClass:"index-item revenue-item"},[a("header",{staticClass:"index-item-title"},[a("div",{staticClass:"title"},[e._v("总收入")])]),a("ul",{staticClass:"index-item-tipUl"},[a("li",[a("span",{staticClass:"addVip-tagB"}),e._v("上月")]),a("li",[a("span",{staticClass:"addVip-tagY"}),e._v("本月")])]),a("div",{staticClass:"flex-between revenueRatio-tip clearfix chart"},[a("ve-pie",{style:e.picStyle,attrs:{data:e.revenueTotal,"legend-visible":!1,colors:e.totalColor,extend:e.picExtend}}),a("ul",{staticClass:"vipNum"},[a("li",[e._v("上月："),a("span",{staticClass:"vipTipY"},[e._v(e._s(e.revenueTotal.rows[0].value))]),e.revenueRatio.lastMonth>0?a("span",{staticClass:"vipTipG revenue-tip"},[a("i",{staticClass:"el-icon-top"}),e._v("\n                                        "+e._s(e.revenueRatio.lastMonth)+"\n                                    ")]):a("span",{staticClass:"vipTipY revenue-tip"},[a("i",{staticClass:"el-icon-bottom"}),e._v(e._s(e._f("mathFloor")(e.revenueRatio.lastMonth))+"\n                                    ")])]),a("li",[e._v("本月："),a("span",{staticClass:"vipTipB"},[e._v(e._s(e.revenueTotal.rows[1].value))]),e.revenueRatio.nowMonth>0?a("span",{staticClass:"vipTipB revenue-tip"},[a("i",{staticClass:"el-icon-top"}),e._v(e._s(e.revenueRatio.nowMonth)+"\n                                    ")]):a("span",{staticClass:"vipTipB revenue-tip"},[a("i",{staticClass:"el-icon-bottom"}),e._v(e._s(e._f("mathFloor")(e.revenueRatio.nowMonth))+"\n                                    ")])])])],1)])]),a("el-col",{attrs:{md:8,lg:8}},[a("div",{staticClass:"index-item revenue-item"},[a("header",{staticClass:"index-item-title",on:{click:function(t){return e.changeData(t)}}},[a("div",{staticClass:"title"},[e._v("项目营收排名")])]),a("ul",{staticClass:"index-item-tipUl"},e._l(e.revenueRanking.rows,(function(t,n){return a("li",{key:n},[a("span",{staticClass:"revenueRanking-span",class:t.class}),e._v(" "+e._s(t.name))])})),0),a("div",{staticClass:"chartRevenue"},[a("ve-histogram",{style:e.histogramStyle,attrs:{data:e.revenueRanking,"legend-visible":!1,colors:e.revenueRankingColor,extend:e.histogramExtend}})],1)])]),a("el-col",{attrs:{md:8,lg:8}},[a("div",{staticClass:"index-item revenue-item",staticStyle:{"padding-bottom":"0"}},[a("header",{staticClass:"index-item-title",on:{click:function(t){return e.changeData(t)}}},[a("div",{staticClass:"title"},[e._v("支付方式排名")])]),a("div",{staticClass:"chartRevenue"},[a("ve-bar",{style:e.barStyle,attrs:{data:e.revenuePayMethods,"legend-visible":!1,colors:e.totalColor,extend:e.barExtend}})],1)])])],1)],1),a("el-tab-pane",{attrs:{lazy:e.tabInfo.tabLazy,label:"营收详细",name:"revenueDetails"}},[a("RevenueDetails")],1)],1)],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),l=(a("7f7f"),a("e6f4")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"vip-tabBox"},[a("div",{staticClass:"pt-screen"},[a("el-select",{staticClass:"inp-mar14 ptSel-section",attrs:{placeholder:"项目"},model:{value:e.revenueDetails.projectChoose,callback:function(t){e.$set(e.revenueDetails,"projectChoose",t)},expression:"revenueDetails.projectChoose"}},e._l(e.revenueProject,(function(e){return a("el-option",{key:e.index,attrs:{label:e.catname,value:e.id}})})),1),a("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.revenueDetails.year,callback:function(t){e.$set(e.revenueDetails,"year",t)},expression:"revenueDetails.year"}}),a("el-date-picker",{staticClass:"inp-mar14 month-inp",attrs:{"value-format":"yyyy-MM",type:"month",placeholder:"选择月"},model:{value:e.revenueDetails.month,callback:function(t){e.$set(e.revenueDetails,"month",t)},expression:"revenueDetails.month"}}),a("el-button",{staticClass:"btn-search",attrs:{icon:"el-icon-search",loading:e.btnLoad.search},on:{click:e.btnSeaDetail}},[e._v("搜索")])],1),a("el-table",{staticClass:"pub-table",attrs:{data:e.detailList,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"项目"}}),a("el-table-column",{attrs:{prop:"total_number",label:"数量"}}),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),a("el-table-column",{attrs:{prop:"refund_price",label:"退款"}}),a("el-table-column",{attrs:{prop:"total_price",label:"合计"}}),a("el-table-column",{attrs:{label:"流水"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.lookDetail(t.$index,t.row)}}},[e._v("查看")])]}}])})],1)],1)])},r=[],c=a("a474"),u={inject:["reLoad"],name:"StatisRevenueDetails",data:function(){return{btnLoad:{search:!1},revenueProject:[],revenueDetails:{projectChoose:"",month:"",year:""},detailList:[]}},methods:{getRevenueContract:function(){var e=this;Object(c["s"])({type:this.revenueDetails.projectChoose}).then((function(t){console.log(t),e.detailList=t.data,e.revenueProject=t.list})).catch((function(e){console.log(e)}))},lookDetail:function(e,t){console.log(e),console.log(t)},btnSeaDetail:function(){var e=this;this.btnLoad.search=!0,console.log(this.revenueDetails),setTimeout((function(){e.btnLoad.search=!1}),1500)}},created:function(){this.getRevenueContract()}},v=u,p=a("2877"),d=Object(p["a"])(v,s,r,!1,null,null,null),b=d.exports,h=a("7a75");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"StatisRevenue",data:function(){return this.revenueRankingColor=["#84CCC9","#AA89BD","#F19EC2","#FF8A7E","#00A0E9","#0000FF","#FFBE00","#00B7EE"],this.totalColor=["#005AD4","#FF8A7E"],this.OverdueColor=["#FFBE00","#FF8A7E","#4CCBEB","#005AD4"],this.vipPtColor=["#FFBE00","#FF8A7E","#1EAAA1","#4CCBEB"],this.histogramExtend=h["b"],this.picExtend=h["d"],this.barExtend=h["a"],{revenueRankingClass:[{class:"colorBgGreenLignt",color:"#84CCC9"},{class:"colorBgViolet",color:"#AA89BD"},{class:"colorBgPink",color:"#F19EC2"},{class:"colorBgRed",color:"#FF8A7E"},{class:"colorBgGreen",color:"#00A0E9"},{class:"colorBgBlueDark",color:"#0000FF"},{class:"colorBgYellow",color:"#FFBE00"},{class:"colorBgBlueGreen",color:"#00B7EE"}],tabInfo:{activeTabName:"revenueTotal",tabLazy:!0},showState:{tabRevenueState:!0},hasAxios:{revenueTotal:!1,revenueDetails:!1},histogramStyle:{height:"180px",width:"100%"},barStyle:{height:"240px",width:"98%"},picStyle:{height:"180px",width:"180px"},lineStyle:{height:"180px",width:"100%"},revenueTotal:{columns:["name","value"],rows:[{name:"",value:0},{name:"",value:0}]},revenueRatio:{lastMonth:0,nowMonth:0},revenueRanking:{columns:["name","value"],rows:[]},revenuePayMethods:{columns:["name","value"],rows:[]}}},methods:{tabTotal:function(e,t){var a=e.name;this.callTabApi(a),sessionStorage.setItem("StatisRevenueTabName",a)},getRevenueTotal:function(){var e=this;Object(c["v"])().then((function(t){console.log(t);var a=[],n=t[1],i=t[2];a.push(n,i),e.revenueTotal.rows=a;var o=t[0].value,l=t[1].value,s=t[2].value,r=l-o,c=s-l;e.revenueRatio.lastMonth=r,e.revenueRatio.nowMonth=c,e.hasAxios.revenueTotal=!0})).catch((function(e){console.log(e)}))},getRevenueRanking:function(){var e=this;Object(c["u"])().then((function(t){console.log(t);var a=t;a=a.map((function(t,a){return f({},t,{},e.revenueRankingClass[a])})),e.revenueRanking.rows=a})).catch((function(e){console.log(e)}))},getRevenuePayMethod:function(){var e=this;Object(c["t"])().then((function(t){e.revenuePayMethods.rows=t})).catch((function(e){console.log(e)}))},callTabApi:function(e){console.log(e),"revenueTotal"==e&&0==this.hasAxios.revenueTotal&&(this.getRevenueTotal(),this.getRevenueRanking(),this.getRevenuePayMethod()),"revenueDetails"==e&&this.hasAxios.revenueDetails}},created:function(){var e=sessionStorage.getItem("StatisRevenueTabName");null==e?e=this.tabInfo.activeTabName:this.tabInfo.activeTabName=e,this.callTabApi(e)},components:{navBread:l["a"],RevenueDetails:b}},y=g,C=(a("9872"),Object(p["a"])(y,n,i,!1,null,null,null));t["default"]=C.exports},e6f4:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"nav-bread",attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("span",{staticClass:"hover-bread",on:{click:function(t){return e.$emit("GoBack")}}},[a("i",{staticClass:"el-icon-back"}),e._v(e._s(e.breadTitle)+"\n            ")])]),a("el-breadcrumb-item",[e._v(e._s(e.breadContent1))])],1)],1)},i=[],o=a("a026");a("3c4e");const l=Object.prototype.hasOwnProperty;function s(e,t){return l.call(e,t)}const r=/(%|)\{([0-9a-zA-Z_]+)\}/g;var c=function(e){function t(e,...t){return 1===t.length&&"object"===typeof t[0]&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(r,(a,n,i,o)=>{let l;return"{"===e[o-1]&&"}"===e[o+a.length]?i:(l=s(t,i)?t[i]:null,null===l||void 0===l?"":l)})}return t};c(o["default"]);var u={name:"navBread",props:{breadTitle:{type:String,default:function(){return"首页"}},breadContent1:{type:String,default:function(){return""}},breadContent2:{type:String,default:function(){return""}}},data:function(){return{}},methods:{},created:function(){}},v=u,p=(a("5033"),a("2877")),d=Object(p["a"])(v,n,i,!1,null,"20808f96",null);t["a"]=d.exports}}]);